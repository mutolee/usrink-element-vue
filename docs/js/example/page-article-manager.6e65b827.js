import{u as E,i as P}from"../../assets/index-0401307f.js";import{_ as A}from"../vue-img-cutter/vue-img-cutter.3d5e4c17.js";import{ah as l,o as m,c as $,W as e,Q as t,a as o,U as r,V as k,T as C,K as j,r as v,L as N,bi as M,bg as B,i as K,ar as O,R as Q,P as x}from"../@vue/@vue.5ea14220.js";import{V as Y}from"../vel-editor/vel-editor.ddcf522d.js";import"../pinia/pinia.fb187a93.js";import"../vue-router/vue-router.6ed6991e.js";import"../localforage/localforage.9e9e3b2b.js";import"../@kangc/@kangc.f59435d2.js";import"../vue/vue.1c0a12e0.js";import"../js-cookie/js-cookie.edb2da2a.js";import"../axios/axios.47b9d439.js";import"../element-plus/element-plus.b000c8d0.js";import"../lodash-es/lodash-es.21c98b27.js";import"../@vueuse/@vueuse.71e72d96.js";import"../@element-plus/@element-plus.b73e6964.js";import"../@popperjs/@popperjs.c75af06c.js";import"../@ctrl/@ctrl.f8748455.js";import"../dayjs/dayjs.10495895.js";import"../async-validator/async-validator.dee29e8b.js";import"../memoize-one/memoize-one.297ddbcb.js";import"../escape-html/escape-html.66262ebd.js";import"../normalize-wheel-es/normalize-wheel-es.ed76fb12.js";import"../@floating-ui/@floating-ui.72671fae.js";import"../echarts/echarts.3025caf6.js";import"../tslib/tslib.54e39b60.js";import"../zrender/zrender.7e5d4d80.js";import"../vue-echarts/vue-echarts.8b3ad32f.js";import"../resize-detector/resize-detector.a5205554.js";import"../nprogress/nprogress.d255c298.js";import"../highlight.js/highlight.js.1b3e8c39.js";import"../@wangeditor/@wangeditor.654f9dc1.js";const G=()=>{const a=new Date,d=a.getFullYear(),_=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0"),f=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0"),b=String(a.getSeconds()).padStart(2,"0");return`${d}-${_}-${s} ${f}:${i}:${b}`},J={getCurrentDateTime:G};const X={class:"preview_con_article"},Z={class:"minapp_header"},ee={class:"article_info_panel"},te={key:0,class:"tit_panel"},le=["innerHTML"],ae={__name:"preview-article",props:["articleInfo","preViewWidth"],setup(a){return(d,_)=>{const s=l("el-text"),f=l("el-scrollbar");return m(),$("div",X,[e(f,null,{default:t(()=>[o("div",Z,[o("span",null,[r("文章"),e(s,{type:"info"},{default:t(()=>[r("(预览)")]),_:1})])]),o("div",ee,[a.articleInfo.showTit&&a.articleInfo.articleTitle?(m(),$("div",te,[e(s,{class:"tit",tag:"b",size:"large"},{default:t(()=>[r(k(a.articleInfo.articleTitle),1)]),_:1}),e(s,{class:"time",type:"info"},{default:t(()=>[r("时间："+k(a.articleInfo.createTime),1)]),_:1})])):C("",!0),o("div",{class:j(["content_panel",a.articleInfo.showSide?"padding":""])},[o("div",{class:"article_detail",innerHTML:a.articleInfo.articleDetail.val},null,8,le)],2)])]),_:1})])}}},H=A(ae,[["__scopeId","data-v-b25ab133"]]);const oe=a=>(M("data-v-d106dd15"),a=a(),B(),a),ie={class:"vel_cpt_panel_drawer_add_article"},ne=oe(()=>o("h4",null,"添加文章",-1)),re={class:"dialog_con"},se={class:"page_left_con"},ce={class:"preview"},de={class:"preview_publish"},_e={class:"page_right",style:{flex:"1"}},ue={class:"page_right_con"},pe={class:"add_article_panel"},me={__name:"article-dialog-add",props:["dialog"],emits:["onConfirm"],setup(a,{emit:d}){const _=d,s=v(400),f=v(null),i=v({articleNo:"",articleTitle:"",status:"1",showTit:!0,showSide:!0,createTime:J.getCurrentDateTime(),articleDetail:{val:"<p></p>"}}),b=v({articleTitle:[{required:!0,message:"文章标题不能为空！",trigger:"blur"},{min:8,max:40,message:"长度在 8 到 40 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),h=async()=>{try{await f.value.validate(),console.log("表单验证通过"),_("onConfirm",i.value)}catch{console.log("表单验证未通过")}};return(T,n)=>{const u=l("el-button"),D=l("el-input"),g=l("el-form-item"),V=l("el-switch"),S=l("el-option"),w=l("el-select"),U=l("el-form"),I=l("el-scrollbar"),W=l("el-card"),y=l("el-drawer");return m(),$("div",ie,[e(y,{modelValue:a.dialog.show,"onUpdate:modelValue":n[4]||(n[4]=p=>a.dialog.show=p),size:"80%",direction:"rtl",class:"vel_drawer_override"},{header:t(()=>[ne]),default:t(()=>[e(I,null,{default:t(()=>[o("div",re,[o("div",{class:"page_left",style:N({width:s.value+"px",minWidth:s.value+"px"})},[o("div",se,[o("div",ce,[e(H,{articleInfo:i.value,preViewWidth:s.value},null,8,["articleInfo","preViewWidth"]),o("div",de,[e(u,{type:"primary",size:"large",onClick:h},{default:t(()=>[r("保存 ")]),_:1})])])])],4),o("div",_e,[o("div",ue,[e(W,{shadow:"never",class:"vel_card_override"},{default:t(()=>[o("div",pe,[e(I,null,{default:t(()=>[e(U,{model:i.value,ref_key:"formRef",ref:f,rules:b.value,"label-width":"120px"},{default:t(()=>[e(g,{label:"标题",prop:"articleTitle",style:{"padding-top":"20px"}},{default:t(()=>[e(D,{modelValue:i.value.articleTitle,"onUpdate:modelValue":n[0]||(n[0]=p=>i.value.articleTitle=p),clearable:"",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(g,{label:"显示标题"},{default:t(()=>[e(V,{modelValue:i.value.showTit,"onUpdate:modelValue":n[1]||(n[1]=p=>i.value.showTit=p)},null,8,["modelValue"])]),_:1}),e(g,{label:"内容边隙"},{default:t(()=>[e(V,{modelValue:i.value.showSide,"onUpdate:modelValue":n[2]||(n[2]=p=>i.value.showSide=p)},null,8,["modelValue"])]),_:1}),e(g,{label:"状态",prop:"status"},{default:t(()=>[e(w,{modelValue:i.value.status,"onUpdate:modelValue":n[3]||(n[3]=p=>i.value.status=p),clearable:"",size:"default",placeholder:"选择状态"},{default:t(()=>[e(S,{label:"已上架",value:"0"}),e(S,{label:"待上架",value:"1"}),e(S,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"商品描述"},{default:t(()=>[e(Y,{content:i.value.articleDetail,editor_width:"",editor_height:450},null,8,["content"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])]),_:1})])])])]),_:1})]),_:1},8,["modelValue"])])}}},ve=A(me,[["__scopeId","data-v-d106dd15"]]);const fe=a=>(M("data-v-90cac6e7"),a=a(),B(),a),ge={class:"vel_cpt_panel_drawer_info_article"},be=fe(()=>o("h4",null,"文章详情",-1)),he={class:"dialog_con"},we={class:"page_left_con"},ye={class:"preview"},Ve={class:"preview_publish"},xe={__name:"article-dialog-info",props:["dialog"],emits:["onConfirm"],setup(a,{emit:d}){E();const _=v(400),s=v({articleNo:"",articleTitle:"啊阿拉斯加都发了，阿里卡束带结发拉，拉克丝代发，阿斯蒂芬离开",status:"1",showTit:!0,showSide:!0,articleDetail:{val:"<p>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/></p>"}});return(f,i)=>{const b=l("el-button"),h=l("el-scrollbar"),T=l("el-drawer");return m(),$("div",ge,[e(T,{modelValue:a.dialog.show,"onUpdate:modelValue":i[0]||(i[0]=n=>a.dialog.show=n),size:_.value,direction:"rtl",class:"vel_drawer_override"},{header:t(()=>[be]),default:t(()=>[e(h,null,{default:t(()=>[o("div",he,[o("div",{class:"page_left",style:N({width:_.value+"px",minWidth:_.value+"px"})},[o("div",we,[o("div",ye,[e(H,{articleInfo:s.value,preViewWidth:_.value},null,8,["articleInfo","preViewWidth"]),o("div",Ve,[e(b,{type:"primary",size:"large",onClick:f.onConfirm},{default:t(()=>[r("编辑 ")]),_:1},8,["onClick"])])])])],4)])]),_:1})]),_:1},8,["modelValue","size"])])}}},Te=A(xe,[["__scopeId","data-v-90cac6e7"]]);const Se={class:"page"},Ie={class:"article_title"},$e={class:"action_btn"},De={__name:"page-article-manager",setup(a){const d=v({articleNo:"",articleTitle:"",status:""}),_=v(!0),s=v([]);K(()=>{f()});const f=()=>{P.get("data/articles.json").then(n=>{s.value=n.data.data}).catch(n=>{console.error(n)}).finally(()=>{_.value=!1})},i=v({show:!1}),b=()=>{i.value.show=!0},h=v({show:!1}),T=()=>{h.value.show=!0};return(n,u)=>{const D=l("el-input"),g=l("el-form-item"),V=l("el-option"),S=l("el-select"),w=l("el-button"),U=l("el-form"),I=l("el-card"),W=l("el-row"),y=l("el-table-column"),p=l("el-text"),z=l("el-tag"),L=l("el-empty"),R=l("el-table"),q=l("el-pagination"),F=O("loading");return m(),$("div",Se,[e(I,{shadow:"never",class:"vel_card_override top"},{default:t(()=>[e(U,{inline:!0,model:d.value},{default:t(()=>[e(g,{label:"编号"},{default:t(()=>[e(D,{modelValue:d.value.articleNo,"onUpdate:modelValue":u[0]||(u[0]=c=>d.value.articleNo=c),placeholder:"编号",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(g,{label:"标题"},{default:t(()=>[e(D,{modelValue:d.value.articleTitle,"onUpdate:modelValue":u[1]||(u[1]=c=>d.value.articleTitle=c),placeholder:"标题",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(g,{label:"状态"},{default:t(()=>[e(S,{modelValue:d.value.status,"onUpdate:modelValue":u[2]||(u[2]=c=>d.value.status=c),size:"default",placeholder:"选择状态",clearable:""},{default:t(()=>[e(V,{label:"已上架",value:"0"}),e(V,{label:"待上架",value:"1"}),e(V,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(w,{type:"primary",plain:"",onClick:u[3]||(u[3]=()=>{})},{default:t(()=>[r("搜索")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(W,{class:"top_btn_panel"},{default:t(()=>[e(w,{type:"primary",onClick:b},{default:t(()=>[r("添加文章")]),_:1})]),_:1}),Q((m(),x(I,{shadow:"never",class:"vel_card_override content"},{default:t(()=>[e(R,{class:"article_table",data:s.value},{empty:t(()=>[e(L,{description:"暂无数据"})]),default:t(()=>[e(y,{prop:"articleNo",label:"编号",sortable:"",width:"100"}),e(y,{label:"文章标题","min-width":"250"},{default:t(c=>[o("div",Ie,[e(p,null,{default:t(()=>[r(k(c.row.articleTitle),1)]),_:2},1024)])]),_:1}),e(y,{label:"时间"},{default:t(c=>[e(p,{type:"info"},{default:t(()=>[r(k(c.row.createTime),1)]),_:2},1024)]),_:1}),e(y,{label:"状态",sortable:"",width:"120"},{default:t(c=>[c.row.status==="0"?(m(),x(z,{key:0},{default:t(()=>[r("已上架")]),_:1})):c.row.status==="1"?(m(),x(z,{key:1,type:"warning"},{default:t(()=>[r("待上架")]),_:1})):c.row.status==="2"?(m(),x(z,{key:2,type:"info"},{default:t(()=>[r("已下架")]),_:1})):C("",!0)]),_:1}),e(y,{fixed:"right",label:"操作",width:"230"},{default:t(c=>[o("div",$e,[e(w,{type:"success",plain:""},{default:t(()=>[r("编辑")]),_:1}),e(w,{type:"primary",plain:"",onClick:T},{default:t(()=>[r("详情")]),_:1}),e(w,{type:"danger",plain:""},{default:t(()=>[r("删除")]),_:1})])]),_:1})]),_:1},8,["data"]),e(q,{background:"",layout:"prev, pager, next",total:1e3})]),_:1})),[[F,_.value]]),i.value.show?(m(),x(ve,{key:0,dialog:i.value,onOnConfirm:u[4]||(u[4]=()=>{})},null,8,["dialog"])):C("",!0),h.value.show?(m(),x(Te,{key:1,dialog:h.value},null,8,["dialog"])):C("",!0)])}}},nt=A(De,[["__scopeId","data-v-235bdff5"]]);export{nt as default};
