import{u as L,i as E}from"../../assets/index-8de0b793.js";import{_ as U}from"../vue-img-cutter/vue-img-cutter.3d5e4c17.js";import{ah as a,o as f,c as C,W as e,Q as t,a as o,U as s,V as z,T as W,K as P,bi as H,bg as B,j as K,r as g,L as M,i as O,ar as Q,R as Y,P as S}from"../@vue/@vue.5ea14220.js";import{V as G}from"../vel-editor/vel-editor.6ed3ba54.js";import"../pinia/pinia.fb187a93.js";import"../vue-router/vue-router.6ed6991e.js";import"../localforage/localforage.9e9e3b2b.js";import"../@kangc/@kangc.f59435d2.js";import"../vue/vue.1c0a12e0.js";import"../js-cookie/js-cookie.edb2da2a.js";import"../axios/axios.47b9d439.js";import"../element-plus/element-plus.4f4b1701.js";import"../lodash-es/lodash-es.21c98b27.js";import"../@vueuse/@vueuse.71e72d96.js";import"../@element-plus/@element-plus.b73e6964.js";import"../@popperjs/@popperjs.c75af06c.js";import"../@ctrl/@ctrl.f8748455.js";import"../dayjs/dayjs.10495895.js";import"../async-validator/async-validator.dee29e8b.js";import"../memoize-one/memoize-one.297ddbcb.js";import"../escape-html/escape-html.66262ebd.js";import"../normalize-wheel-es/normalize-wheel-es.ed76fb12.js";import"../@floating-ui/@floating-ui.72671fae.js";import"../echarts/echarts.3025caf6.js";import"../tslib/tslib.54e39b60.js";import"../zrender/zrender.7e5d4d80.js";import"../vue-echarts/vue-echarts.8b3ad32f.js";import"../resize-detector/resize-detector.a5205554.js";import"../nprogress/nprogress.d255c298.js";import"../highlight.js/highlight.js.1b3e8c39.js";import"../@wangeditor/@wangeditor.654f9dc1.js";const J=()=>{const l=new Date,c=l.getFullYear(),_=String(l.getMonth()+1).padStart(2,"0"),p=String(l.getDate()).padStart(2,"0"),m=String(l.getHours()).padStart(2,"0"),r=String(l.getMinutes()).padStart(2,"0"),h=String(l.getSeconds()).padStart(2,"0");return`${c}-${_}-${p} ${m}:${r}:${h}`},X={getCurrentDateTime:J};const Z=l=>(H("data-v-f2c5e789"),l=l(),B(),l),ee={class:"preview_con_article"},te=Z(()=>o("div",{class:"minapp_header"},[o("span",null,"文章")],-1)),le={class:"article_info_panel"},ae={key:0,class:"tit_panel"},oe=["innerHTML"],ie={__name:"preview-article",props:["articleInfo","preViewWidth"],setup(l){return(c,_)=>{const p=a("el-text"),m=a("el-scrollbar");return f(),C("div",ee,[e(m,null,{default:t(()=>[te,o("div",le,[l.articleInfo.showTit&&l.articleInfo.articleTitle?(f(),C("div",ae,[e(p,{class:"tit",tag:"b",size:"large"},{default:t(()=>[s(z(l.articleInfo.articleTitle),1)]),_:1}),e(p,{class:"time",type:"info"},{default:t(()=>[s("时间："+z(l.articleInfo.createTime),1)]),_:1})])):W("",!0),o("div",{class:P(["content_panel",l.articleInfo.showSide?"padding":""])},[o("div",{class:"article_detail",innerHTML:l.articleInfo.articleDetail.val},null,8,oe)],2)])]),_:1})])}}},R=U(ie,[["__scopeId","data-v-f2c5e789"]]);const re=l=>(H("data-v-3cc84373"),l=l(),B(),l),ne={class:"vel_cpt_panel_drawer_add_article"},se=re(()=>o("h4",null,"添加文章",-1)),ce={class:"dialog_con"},de={class:"page_left_con"},_e={class:"preview"},ue={class:"preview_publish"},pe={class:"page_right_con"},me={class:"add_article_panel"},ve={__name:"article-dialog-add",props:["dialog"],emits:["onConfirm"],setup(l,{emit:c}){const _=L(),p=c,m=K(()=>_.wh.w-260),r=g(400),h=g(null),i=g({articleNo:"",articleTitle:"",status:"1",showTit:!0,showSide:!0,createTime:X.getCurrentDateTime(),articleDetail:{val:"<p></p>"}}),T=g({articleTitle:[{required:!0,message:"文章标题不能为空！",trigger:"blur"},{min:8,max:40,message:"长度在 8 到 40 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),b=async()=>{try{await h.value.validate(),console.log("表单验证通过"),p("onConfirm",i.value)}catch{console.log("表单验证未通过")}};return(u,d)=>{const x=a("el-button"),I=a("el-input"),V=a("el-form-item"),w=a("el-switch"),$=a("el-option"),k=a("el-select"),N=a("el-form"),y=a("el-scrollbar"),A=a("el-card"),D=a("el-drawer");return f(),C("div",ne,[e(D,{modelValue:l.dialog.show,"onUpdate:modelValue":d[4]||(d[4]=v=>l.dialog.show=v),size:m.value,direction:"rtl",class:"vel_drawer_override"},{header:t(()=>[se]),default:t(()=>[e(y,null,{default:t(()=>[o("div",ce,[o("div",{class:"page_left",style:M({width:r.value+"px",minWidth:r.value+"px"})},[o("div",de,[o("div",_e,[e(R,{articleInfo:i.value,preViewWidth:r.value},null,8,["articleInfo","preViewWidth"]),o("div",ue,[e(x,{type:"primary",size:"large",onClick:b},{default:t(()=>[s("保存 ")]),_:1})])])])],4),o("div",{class:"page_right",style:M({width:m.value-r.value+"px"})},[o("div",pe,[e(A,{shadow:"never",class:"vel_card_override"},{default:t(()=>[o("div",me,[e(y,null,{default:t(()=>[e(N,{model:i.value,ref_key:"formRef",ref:h,rules:T.value,"label-width":"120px"},{default:t(()=>[e(V,{label:"标题",prop:"articleTitle",style:{"padding-top":"20px"}},{default:t(()=>[e(I,{modelValue:i.value.articleTitle,"onUpdate:modelValue":d[0]||(d[0]=v=>i.value.articleTitle=v),clearable:"",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(V,{label:"显示标题"},{default:t(()=>[e(w,{modelValue:i.value.showTit,"onUpdate:modelValue":d[1]||(d[1]=v=>i.value.showTit=v)},null,8,["modelValue"])]),_:1}),e(V,{label:"内容边隙"},{default:t(()=>[e(w,{modelValue:i.value.showSide,"onUpdate:modelValue":d[2]||(d[2]=v=>i.value.showSide=v)},null,8,["modelValue"])]),_:1}),e(V,{label:"状态",prop:"status"},{default:t(()=>[e(k,{modelValue:i.value.status,"onUpdate:modelValue":d[3]||(d[3]=v=>i.value.status=v),clearable:"",size:"default",placeholder:"选择状态"},{default:t(()=>[e($,{label:"已上架",value:"0"}),e($,{label:"待上架",value:"1"}),e($,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"商品描述"},{default:t(()=>[e(G,{content:i.value.articleDetail,editor_width:m.value-r.value-200,editor_height:450},null,8,["content","editor_width"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])]),_:1})])],4)])]),_:1})]),_:1},8,["modelValue","size"])])}}},fe=U(ve,[["__scopeId","data-v-3cc84373"]]);const ge=l=>(H("data-v-8a064b37"),l=l(),B(),l),he={class:"vel_cpt_panel_drawer_info_article"},be=ge(()=>o("h4",null,"文章详情",-1)),we={class:"dialog_con"},ye={class:"page_left_con"},Ve={class:"preview"},xe={class:"preview_publish"},Se={__name:"article-dialog-info",props:["dialog"],emits:["onConfirm"],setup(l,{emit:c}){L();const _=g(400),p=g({articleNo:"",articleTitle:"啊阿拉斯加都发了，阿里卡束带结发拉，拉克丝代发，阿斯蒂芬离开",status:"1",showTit:!0,showSide:!0,articleDetail:{val:"<p>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/>文章内容<br/></p>"}});return(m,r)=>{const h=a("el-button"),i=a("el-scrollbar"),T=a("el-drawer");return f(),C("div",he,[e(T,{modelValue:l.dialog.show,"onUpdate:modelValue":r[0]||(r[0]=b=>l.dialog.show=b),size:_.value,direction:"rtl",class:"vel_drawer_override"},{header:t(()=>[be]),default:t(()=>[e(i,null,{default:t(()=>[o("div",we,[o("div",{class:"page_left",style:M({width:_.value+"px",minWidth:_.value+"px"})},[o("div",ye,[o("div",Ve,[e(R,{articleInfo:p.value,preViewWidth:_.value},null,8,["articleInfo","preViewWidth"]),o("div",xe,[e(h,{type:"primary",size:"large",onClick:m.onConfirm},{default:t(()=>[s("编辑 ")]),_:1},8,["onClick"])])])])],4)])]),_:1})]),_:1},8,["modelValue","size"])])}}},Te=U(Se,[["__scopeId","data-v-8a064b37"]]);const Ie={class:"page"},$e={class:"article_title"},De={class:"action_btn"},Ce={__name:"page-article-manager",setup(l){const c=g({articleNo:"",articleTitle:"",status:""}),_=g(!0),p=g([]);O(()=>{m()});const m=()=>{E.get("data/articles.json").then(b=>{p.value=b.data.data}).catch(b=>{console.error(b)}).finally(()=>{_.value=!1})},r=g({show:!1}),h=()=>{r.value.show=!0},i=g({show:!1}),T=()=>{i.value.show=!0};return(b,u)=>{const d=a("el-input"),x=a("el-form-item"),I=a("el-option"),V=a("el-select"),w=a("el-button"),$=a("el-form"),k=a("el-card"),N=a("el-row"),y=a("el-table-column"),A=a("el-text"),D=a("el-tag"),v=a("el-empty"),q=a("el-table"),F=a("el-pagination"),j=Q("loading");return f(),C("div",Ie,[e(k,{shadow:"never",class:"vel_card_override top"},{default:t(()=>[e($,{inline:!0,model:c.value},{default:t(()=>[e(x,{label:"编号"},{default:t(()=>[e(d,{modelValue:c.value.articleNo,"onUpdate:modelValue":u[0]||(u[0]=n=>c.value.articleNo=n),placeholder:"编号",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(x,{label:"标题"},{default:t(()=>[e(d,{modelValue:c.value.articleTitle,"onUpdate:modelValue":u[1]||(u[1]=n=>c.value.articleTitle=n),placeholder:"标题",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(x,{label:"状态"},{default:t(()=>[e(V,{modelValue:c.value.status,"onUpdate:modelValue":u[2]||(u[2]=n=>c.value.status=n),size:"default",placeholder:"选择状态",clearable:""},{default:t(()=>[e(I,{label:"已上架",value:"0"}),e(I,{label:"待上架",value:"1"}),e(I,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(x,null,{default:t(()=>[e(w,{type:"primary",plain:"",onClick:u[3]||(u[3]=()=>{})},{default:t(()=>[s("搜索")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{class:"top_btn_panel"},{default:t(()=>[e(w,{type:"primary",onClick:h},{default:t(()=>[s("添加文章")]),_:1})]),_:1}),Y((f(),S(k,{shadow:"never",class:"vel_card_override content"},{default:t(()=>[e(q,{class:"article_table",data:p.value},{empty:t(()=>[e(v,{description:"暂无数据"})]),default:t(()=>[e(y,{prop:"articleNo",label:"编号",sortable:"",width:"100"}),e(y,{label:"文章标题","min-width":"250"},{default:t(n=>[o("div",$e,[e(A,null,{default:t(()=>[s(z(n.row.articleTitle),1)]),_:2},1024)])]),_:1}),e(y,{label:"时间"},{default:t(n=>[e(A,{type:"info"},{default:t(()=>[s(z(n.row.createTime),1)]),_:2},1024)]),_:1}),e(y,{prop:"status",label:"状态",sortable:"",width:"120"},{default:t(n=>[n.row.status==="0"?(f(),S(D,{key:0},{default:t(()=>[s("已上架")]),_:1})):n.row.status==="1"?(f(),S(D,{key:1,type:"warning"},{default:t(()=>[s("待上架")]),_:1})):n.row.status==="2"?(f(),S(D,{key:2,type:"info"},{default:t(()=>[s("已下架")]),_:1})):W("",!0)]),_:1}),e(y,{fixed:"right",label:"操作",width:"230"},{default:t(n=>[o("div",De,[e(w,{type:"success",plain:""},{default:t(()=>[s("编辑")]),_:1}),e(w,{type:"primary",plain:"",onClick:T},{default:t(()=>[s("详情")]),_:1}),e(w,{type:"danger",plain:""},{default:t(()=>[s("删除")]),_:1})])]),_:1})]),_:1},8,["data"]),e(F,{background:"",layout:"prev, pager, next",total:1e3})]),_:1})),[[j,_.value]]),r.value.show?(f(),S(fe,{key:0,dialog:r.value,onOnConfirm:u[4]||(u[4]=()=>{})},null,8,["dialog"])):W("",!0),i.value.show?(f(),S(Te,{key:1,dialog:i.value},null,8,["dialog"])):W("",!0)])}}},nt=U(Ce,[["__scopeId","data-v-41edeb25"]]);export{nt as default};
